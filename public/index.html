<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>meeemories</title>
  <link href="https://fonts.googleapis.com/css?family=Cookie" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="./style/reset.css" rel="stylesheet" type="text/css">
  <link href="./style/style.css" rel="stylesheet" type="text/css">
  
</head>
<body class="app" data-controller="app">
  <header class="app__header">
    <h1 class="logo" data-controller="logo">meeemories</h1>
    <i class="app__menu-switch material-icons">more_vert</i>
  </header>
  <main class="app__main" data-target="app.main">
    <section id="home" class="page page--active" data-target="app.list" data-controller="list" data-list-item-template="#media-tmpl">
      <div class="list__container" data-target="list.container"></div>
      <div class="list__next" data-target="list.next"></div>
      <button class="fab app__view-switch material-icons" data-action="app#toggleView"></button>
    </section>
    <section id="mypage" class="page" data-target="app.mines" data-message="Android端末やご使用ブラウザによっては複数アップロードがご利用できません">
    </section>
  </main>
  <footer class="app__footer">
    <ul class="actions">
      <li class="actions__space"></li>
      <li class="actions__item" data-action="click->app#go" data-to="#home">
        <i class="icon icon__home icon--active"></i>
      </li>
      <li class="actions__space"></li>
      <li class="actions__item">
        <label>
          <i class="icon icon__add"></i>
          <input type="file" name="files[]" accept="image/*,video/*" multiple="multiple" data-target="app.file" data-action="change->app#upload">
        </label>
      </li>
      <li class="actions__space"></li>
      <li class="actions__item" data-action="click->app#go" data-to="#mypage">
        <i class="icon icon__person"></i>
      </li>
      <li class="actions__space"></li>
    </ul>
  </footer>
  <script src="./lib/jquery-3.3.1.min.js"></script>
  <script src="./lib/jsrender.min.js"></script>
  <script src="./lib/stimulus.umd.js"></script>
  <script src="./src/stimulus.extensions.js"></script>
  <script src="./src/controllers/index.js"></script>
  <script src="./src/controllers/app.js"></script>
  <script src="./src/controllers/logo.js"></script>
  <script src="./src/controllers/list.js"></script>
  <script src="./src/controllers/media-item.js"></script>
  <script src="./src/controllers/popup.js"></script>
  <script src="./src/controllers/uploading-item.js"></script>
  <script id="media-tmpl" type="text/x-jsrender">
    <div  class="media-item media-item--animating" 
          data-target="list.item"
          data-controller="media-item"
          data-id="{{:id}}"
          data-media-item-src="{{:thumbnail.src}}"
          data-media-item-srcset="{{:thumbnail.srcset}}"
          data-media-item-sizes="{{:thumbnail.sizes}}"
          data-media-item-download="{{:download}}">
      <div class="media-item__space" style="padding-top:{{:aspect * 100}}%;"></div>
      <img class="media-item__thumb" data-target="media-item.thumb" data-action="click->media-item#onClick">
      <img class="media-item__cover" style="background-image: url('{{:tiny}}');" data-action="click->media-item#onClick">
      <button class="media-item__select" data-action="media-item#select"></button>
      <template data-target="media-item.template">
        <article  class="popup" 
                  data-controller="popup"
                  data-popup-src={{:large.src}}
                  data-popup-srcset="{{:large.srcset}}">
          <button class="popup__close" data-action="popup#close">
            <i class="material-icons">arrow_back</i>
          </button>
          <img class="popup__image" src="{{:thumbnail.src}}" >
          <img class="popup__image" data-target="popup.image">
        </article>
      </template>
    </div>
  </script>
  <template id="uploading-tmpl">
      <div class="uploading-item" data-controller="uploading-item">
        <div class="uploading-item__thumb" data-target="uploading-item.thumb"></div>
        <ul class="uploading-item__breadcrumb">
          <li><span>アップロード</span></li>
          <li><span>最適化</span></li>
          <li><span>投稿完了</span></li>
        </ul>
        <div class="uploading-item__indicator" data-target="uploading-item.progress"></div>
        <button class="uploading-item__remove" data-action="uploading-item#remove"><i class="material-icons">delete</i></button>
      </div>
  </template>
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-126043044-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-126043044-1');
    window.addEventListener('error', function(message, source, lineno, colno, error) {
      ga('send', 'exception', {
        'exDescription': JSON.stringify({message, source, lineno, colno, error }),
        'exFatal': false
      });
    })
  </script>
</body>
</html>